{"ast":null,"code":"// Configuration de l'API\nconst API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// Headers par défaut\nconst getDefaultHeaders = () => {\n  const headers = {\n    \"Content-Type\": \"application/json\"\n  };\n\n  // Ajouter le token d'authentification s'il existe\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\");\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n    console.log(\"Token d'authentification ajouté:\", token.substring(0, 20) + \"...\");\n  } else {\n    console.log(\"Aucun token d'authentification trouvé\");\n  }\n  return headers;\n};\n\n// Fonction utilitaire pour les appels API\nconst apiCall = async (endpoint, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  const config = {\n    headers: getDefaultHeaders(),\n    ...options\n  };\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n\n    // Gérer les erreurs HTTP\n    if (!response.ok) {\n      throw new Error(data.message || `Erreur ${response.status}`);\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Erreur API:\", error);\n    throw error;\n  }\n};\n\n// Méthodes HTTP\nconst api = {\n  get: endpoint => apiCall(endpoint, {\n    method: \"GET\"\n  }),\n  post: (endpoint, body) => apiCall(endpoint, {\n    method: \"POST\",\n    body: JSON.stringify(body)\n  }),\n  put: (endpoint, body) => apiCall(endpoint, {\n    method: \"PUT\",\n    body: JSON.stringify(body)\n  }),\n  delete: endpoint => apiCall(endpoint, {\n    method: \"DELETE\"\n  })\n};\nexport default api;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getDefaultHeaders","headers","token","localStorage","getItem","console","log","substring","apiCall","endpoint","options","url","config","response","fetch","data","json","ok","Error","message","status","error","api","get","method","post","body","JSON","stringify","put","delete"],"sources":["C:/Users/LENOVO/Desktop/eTabax/frontend/src/api/config.js"],"sourcesContent":["// Configuration de l'API\nconst API_BASE_URL =\n  process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// Headers par défaut\nconst getDefaultHeaders = () => {\n  const headers = {\n    \"Content-Type\": \"application/json\",\n  };\n\n  // Ajouter le token d'authentification s'il existe\n  const token =\n    localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\");\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n    console.log(\"Token d'authentification ajouté:\", token.substring(0, 20) + \"...\");\n  } else {\n    console.log(\"Aucun token d'authentification trouvé\");\n  }\n\n  return headers;\n};\n\n// Fonction utilitaire pour les appels API\nconst apiCall = async (endpoint, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n\n  const config = {\n    headers: getDefaultHeaders(),\n    ...options,\n  };\n\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n\n    // Gérer les erreurs HTTP\n    if (!response.ok) {\n      throw new Error(data.message || `Erreur ${response.status}`);\n    }\n\n    return data;\n  } catch (error) {\n    console.error(\"Erreur API:\", error);\n    throw error;\n  }\n};\n\n// Méthodes HTTP\nconst api = {\n  get: (endpoint) => apiCall(endpoint, { method: \"GET\" }),\n\n  post: (endpoint, body) =>\n    apiCall(endpoint, {\n      method: \"POST\",\n      body: JSON.stringify(body),\n    }),\n\n  put: (endpoint, body) =>\n    apiCall(endpoint, {\n      method: \"PUT\",\n      body: JSON.stringify(body),\n    }),\n\n  delete: (endpoint) => apiCall(endpoint, { method: \"DELETE\" }),\n};\n\nexport default api;\n"],"mappings":"AAAA;AACA,MAAMA,YAAY,GAChBC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;;AAE9D;AACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAC9B,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE;EAClB,CAAC;;EAED;EACA,MAAMC,KAAK,GACTC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAID,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACpE,IAAIF,KAAK,EAAE;IACTD,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUC,KAAK,EAAE;IAC5CG,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEJ,KAAK,CAACK,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC;EACjF,CAAC,MAAM;IACLF,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;EACtD;EAEA,OAAOL,OAAO;AAChB,CAAC;;AAED;AACA,MAAMO,OAAO,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAChD,MAAMC,GAAG,GAAG,GAAGf,YAAY,GAAGa,QAAQ,EAAE;EAExC,MAAMG,MAAM,GAAG;IACbX,OAAO,EAAED,iBAAiB,CAAC,CAAC;IAC5B,GAAGU;EACL,CAAC;EAED,IAAI;IACF,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAEC,MAAM,CAAC;IACzC,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;IAElC;IACA,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,IAAI,UAAUN,QAAQ,CAACO,MAAM,EAAE,CAAC;IAC9D;IAEA,OAAOL,IAAI;EACb,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdhB,OAAO,CAACgB,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;IACnC,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,MAAMC,GAAG,GAAG;EACVC,GAAG,EAAGd,QAAQ,IAAKD,OAAO,CAACC,QAAQ,EAAE;IAAEe,MAAM,EAAE;EAAM,CAAC,CAAC;EAEvDC,IAAI,EAAEA,CAAChB,QAAQ,EAAEiB,IAAI,KACnBlB,OAAO,CAACC,QAAQ,EAAE;IAChBe,MAAM,EAAE,MAAM;IACdE,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACF,IAAI;EAC3B,CAAC,CAAC;EAEJG,GAAG,EAAEA,CAACpB,QAAQ,EAAEiB,IAAI,KAClBlB,OAAO,CAACC,QAAQ,EAAE;IAChBe,MAAM,EAAE,KAAK;IACbE,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACF,IAAI;EAC3B,CAAC,CAAC;EAEJI,MAAM,EAAGrB,QAAQ,IAAKD,OAAO,CAACC,QAAQ,EAAE;IAAEe,MAAM,EAAE;EAAS,CAAC;AAC9D,CAAC;AAED,eAAeF,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}